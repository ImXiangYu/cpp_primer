# 一些看书积累的小TIPS

## 类型选择

1. 明确知道数值不为负数时，选择无符号类型
2. 整数运算用 int，超过范围用 long long
3. 算术表达式不要用 char 或 bool
4. 浮点数用double

## 带符号类型和无符号类型

不要混用带符号类型和无符号类型

## 初始化变量

建议初始化每一个内置类型的变量

## 变量命名规范

1. 标识符要能体现实际含义
2. 变量一般用小写字母，如index
3. 自定义类名一般大写字母开头，如Sales_item
4. 多个单词之间应该有明显区分，如student_loan

## 变量定义

建议在对象第一次被使用的地方附近定义它

如果函数有可能用到某全局变量，不建议再定义一个同名的局部变量

## 指针初始化

建议初始化所有指针

## 头文件保护符

习惯性地加上头文件保护符，避免被重复包含

## 头文件不应包含using声明

头文件不应包含using声明，因为头文件的内容会被拷贝到所有引用它的文件中，一不小心就容易出现冲突

## 无需定义vector大小

定义vector对象时，设定其大小可能会使性能更差，所以不必在创建时顺便指定容量

## 数组 or vector？

数组大小确定不变，对于某些应用来说性能更好，**但如果不确定元素的确切个数，建议使用vector**

## 尽量使用标准库类型

现代C++程序应尽量使用vector和迭代器，避免使用内置数组和指针，尽量使用string，避免使用C风格的基于数组的字符串

## range for使用引用类型

```cpp
size_t cnt = 0;
for (auto &row : ia){
	for(auto col : row) {
            col = cnt;
            ++cnt;
	}
}
```

**为什么要声明引用类型？**即使没有任何写操作，但是为了避免数组被自动转成指针，还是声明了引用类型，假设不适用引用类型，row将会被转换成指向该数组内首元素的指针，这样得到的row类型是int*，内层的循环将不合法

**因此，要使用range for处理多维数组时，除了最内层的循环外，其他所有循环的控制变量都应该是引用类型**

## 前置递增递减

**建议除了非必须，否则不用后置版本，坚持使用前置版本++i**，原因是后置版本需要将原始值存储下来以便返回这个未修改的内容，而对于整数和指针类型来说，编译器可能会有一定的优化，但是对于复杂的迭代器类型，这种额外工作的消耗就巨大了。

## 避免强制类型转换

强烈建议程序员避免使用强制类型转换！

## break

建议每个case后都加上break，不管需不需要

## default

即使不准备在default标签下做任何工作，定义一个default标签也是有用的，其目的在于告诉程序的读者，我们已经考虑到了默认的情况，只是目前什么也没做

## goto

不要在程序里使用goto，因为它让程序变得既难理解又难修改

## 引用类型的形参

熟悉C的程序员常常使用指针类型的形参访问函数外部的对象，但在C++中，建议使用引用类型的形参代替指针

## 使用传引用避免拷贝

拷贝大的类类型对象或者容器对象比较低效，甚至有的类类型（包括IO类型在内）根本就不支持拷贝操作。当某种类型不支持拷贝操作时，函数只能通过引用形参访问该类型的对象。

## 使用引用形参返回额外信息

一个函数只能返回一个值，然而有时候函数需要返回多个值，可以使用引用形参
我们可以把实参传入，实参在函数运行后值会改变，变相返回了额外信息

## 尽量使用常量引用

把函数不会改变的形参定义成（普通的）引用是一种比较常见的错误，这么做带给函数的调用者一种误导，即函数可以修改它的实参的值。

此外，使用引用而非常量引用也会极大地限制函数所能接受的实参类型，我们不能把const对象、字面值或者需要类型转换的对象传递给普通的引用形参。

## 不要返回局部对象的引用或指针

返回局部对象的引用和指针是错误的，一旦函数完成，局部对象将被释放，指针将指向一个不存在的对象

## 尾置返回类型

C++11可以使用尾置返回类型，任何函数的定义都能使用尾置返回，定义返回类型比较复杂的函数最有用，比如返回类型是数组的指针或引用

```cpp
auto func(int i) -> int(*)[10];
```

```cpp
int (*f1(int))(int*, int);
// 等价于
auto f1(int) -> int (*)(int*, int);
```

## \_\_xxx\_\_

1. \_\_func\_\_，可以输出当前调试的函数的名字，编译器为每个函数都定义了\_\_func\_\_
2. \_\_FILE\_\_，存放文件名的字符串字面值
3. \_\_LINE\_\_，存放当前行号的整形字面值
4. \_\_TIME\_\_，存放文件编译时间的字符串字面值
5. \_\_DATE\_\_，存放文件编译日期的字符串字面值

## class、struct

struct和class的**唯一一点区别**是，它们的默认访问权限不一样。

使用struct，在定义一个访问说明符之前的成员是public的，相反，如果我们使用class，则成员是private的

## 友元

一般来说，最好在类定义开始或结束前的位置集中声明友元

## 构造函数初始值顺序

最好令构造函数初始值的顺序与成员声明的顺序保持一致，而且如果可能的话，尽量避免使用某些成员初始化其他成员

因为成员的初始化顺序只与他们在类定义中出现的顺序一致

